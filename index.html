<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>燃料単価掲出ツール</title>
    <style>
        body {
            font-family: 'Meiryo', 'MS Gothic', sans-serif;
            margin: 0;
            padding: 20px;
            background: #f5f5f5;
        }
        
        .fuel-board {
            background: white;
            border: 3px solid #333;
            border-radius: 8px;
            padding: 30px;
            max-width: 800px;
            margin: 0 auto;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }
        
        .header {
            text-align: center;
            margin-bottom: 25px;
            border-bottom: 2px solid #e0e0e0;
            padding-bottom: 15px;
        }
        
        .company-name {
            font-size: 18px;
            font-weight: bold;
            color: #d32f2f;
            margin-bottom: 5px;
        }
        
        .title {
            font-size: 32px;
            font-weight: bold;
            color: #333;
            margin-bottom: 10px;
        }
        
        .store-name {
            font-size: 20px;
            font-weight: bold;
            color: #333;
        }
        
        .update-info {
            text-align: right;
            font-size: 14px;
            color: #666;
            margin-bottom: 20px;
        }
        
        .price-section {
            display: flex;
            justify-content: space-around;
            margin-bottom: 30px;
            gap: 20px;
        }
        
        .fuel-type {
            flex: 1;
            text-align: center;
            padding: 20px;
            border-radius: 8px;
            border: 2px solid #ddd;
        }
        
        .regular {
            background: linear-gradient(135deg, #ff4444 0%, #cc0000 100%);
            color: white;
        }
        
        .diesel {
            background: linear-gradient(135deg, #4CAF50 0%, #2E7D32 100%);
            color: white;
        }
        
        .fuel-label {
            font-size: 24px;
            font-weight: bold;
            margin-bottom: 10px;
        }
        
        .fuel-price {
            font-size: 48px;
            font-weight: bold;
            margin-bottom: 5px;
            display: flex;
            align-items: baseline;
            justify-content: center;
            gap: 8px;
        }
        
        .fuel-unit {
            font-size: 18px;
            opacity: 0.9;
        }
        
        .reference-section {
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            border: 2px solid #dee2e6;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 25px;
        }
        
        .reference-title {
            font-size: 18px;
            font-weight: bold;
            color: #495057;
            margin-bottom: 15px;
            text-align: center;
        }
        
        .station-info {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
            margin-bottom: 10px;
        }
        
        .station-name {
            font-size: 20px;
            font-weight: bold;
            color: #007bff;
        }
        
        .location-badge {
            background: #28a745;
            color: white;
            padding: 5px 12px;
            border-radius: 15px;
            font-size: 14px;
            font-weight: bold;
        }
        
        .location-detail {
            text-align: center;
            font-size: 16px;
            color: #6c757d;
            margin-bottom: 10px;
        }
        
        .reliability-note {
            text-align: center;
            font-size: 14px;
            color: #495057;
            font-style: italic;
            background: #fff3cd;
            padding: 8px;
            border-radius: 5px;
            border-left: 4px solid #ffc107;
        }
        
        .hybrid-section {
            background: #e8f5e8;
            border: 1px solid #c8e6c9;
            border-radius: 8px;
            padding: 15px;
            margin-top: 20px;
        }
        
        .hybrid-title {
            font-size: 16px;
            font-weight: bold;
            color: #2e7d32;
            margin-bottom: 8px;
        }
        
        .hybrid-text {
            font-size: 14px;
            color: #424242;
            line-height: 1.4;
        }
        
        .map-container {
            margin: 15px 0;
            text-align: center;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        
        .location-map {
            width: 100%;
            max-width: 600px;
            height: 280px;
            border: 2px solid #dee2e6;
            border-radius: 8px;
            object-fit: cover;
            display: block;
            margin: 0 auto;
        }
        
        .map-legend {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin-top: 10px;
            padding: 10px;
            background: rgba(255, 255, 255, 0.9);
            border-radius: 5px;
        }
        
        .legend-item {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 14px;
        }
        
        .legend-marker {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            color: white;
            font-weight: bold;
            font-size: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            border: 2px solid white;
        }
        
        .legend-marker.red {
            background-color: #ff4444;
        }
        
        .legend-marker.blue {
            background-color: #4285f4;
        }
        
        .legend-text {
            font-weight: 500;
            color: #495057;
        }
        
        .map-loading {
            display: flex;
            align-items: center;
            justify-content: center;
            height: 280px;
            width: 100%;
            max-width: 600px;
            background: #f8f9fa;
            border: 2px solid #dee2e6;
            border-radius: 8px;
            color: #6c757d;
            font-size: 16px;
            margin: 0 auto;
        }
        
        @media print {
            body {
                background: white;
                padding: 0;
            }
            
            .fuel-board {
                box-shadow: none;
                border: 2px solid #333;
            }
        }
    </style>
</head>
<body>
    <div class="fuel-board">
        <div class="header">
            <div class="company-name">トヨタレンタカー</div>
            <div class="title">燃料単価</div>
            <div class="store-name">新白島駅前店</div>
        </div>
        
        <div class="update-info">
            ◎消費税込価格です　　　　　　　　　　　　　　　　　7月15日更新
        </div>
        
        <div class="price-section">
            <div class="fuel-type regular">
                <div class="fuel-label">レギュラー</div>
                <div class="fuel-price">
                    <span>169</span>
                    <span class="fuel-unit">円/L</span>
                </div>
            </div>
            
            <div class="fuel-type diesel">
                <div class="fuel-label">軽油</div>
                <div class="fuel-price">
                    <span>150</span>
                    <span class="fuel-unit">円/L</span>
                </div>
            </div>
        </div>
        
        <div class="reference-section">
            <div class="reference-title">📍 価格参考スタンド</div>
            <div class="station-info">
                <div class="station-name">大野石油店 牛田大橋SS</div>
                <div class="location-badge">当店から東へ450m</div>
            </div>
            <div class="location-detail">
                店舗周辺で価格調査を実施し、妥当性の高い単価を採用しています
            </div>
            
            <div class="map-container">
                <div id="map" class="location-map"></div>
                <div id="mapLoading" class="map-loading">
                    地図を読み込み中...
                </div>
                <div class="map-legend">
                    <div class="legend-item">
                        <span class="legend-marker red">R</span>
                        <span class="legend-text">トヨタレンタカー新白島駅前店</span>
                    </div>
                    <div class="legend-item">
                        <span class="legend-marker blue">G</span>
                        <span class="legend-text">大野石油店 牛田大橋SS</span>
                    </div>
                </div>
            </div>
            
            <div class="reliability-note">
                💡 燃費精算は給油の手間が省けて、適正価格でご利用いただけます
            </div>
        </div>
        
        <div class="hybrid-section">
            <div class="hybrid-title">🚗 燃費精算のご案内</div>
            <div class="hybrid-text">
                <strong>返却時はガソリンスタンドに寄らずに店舗へお戻りください！</strong><br>
                実際の走行距離÷平均燃費×燃料単価で燃料代を算出し、店頭で燃料代の精算ができます。<br>
                満タン返却の手間が不要で、エコドライブをするほど燃料代もお得になります。
            </div>
        </div>
    </div>
    
    <script async defer 
            src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAGUorGUfy--oERdupd_6FoUQc-xFR5WbE&callback=initMap">
    </script>
    
    <script>
        function initMap() {
            const origin = '広島県広島市中区白島北町9-14';
            const destination = '広島県広島市中区白島九軒町3-13';
            
            // 地図の初期化
            const map = new google.maps.Map(document.getElementById('map'), {
                zoom: 15,
                center: { lat: 34.4087, lng: 132.4733 },
                mapTypeId: 'roadmap',
                disableDefaultUI: true,
                zoomControl: true,
                gestureHandling: 'cooperative'
            });
            
            // Directions Service とRenderer の作成
            const directionsService = new google.maps.DirectionsService();
            const directionsRenderer = new google.maps.DirectionsRenderer({
                polylineOptions: {
                    strokeColor: '#4285f4',
                    strokeWeight: 4,
                    strokeOpacity: 0.8
                },
                suppressMarkers: true // デフォルトマーカーを非表示
            });
            
            directionsRenderer.setMap(map);
            
            // カスタムマーカーを作成
            const startMarker = new google.maps.Marker({
                position: null,
                map: map,
                title: 'トヨタレンタカー新白島駅前店',
                icon: {
                    url: 'data:image/svg+xml;charset=UTF-8,' + encodeURIComponent(`
                        <svg width="30" height="30" xmlns="http://www.w3.org/2000/svg">
                            <circle cx="15" cy="15" r="12" fill="#ff4444" stroke="white" stroke-width="2"/>
                            <text x="15" y="19" text-anchor="middle" fill="white" font-family="Arial" font-size="12" font-weight="bold">R</text>
                        </svg>
                    `),
                    anchor: new google.maps.Point(15, 15)
                }
            });
            
            const endMarker = new google.maps.Marker({
                position: null,
                map: map,
                title: '大野石油店 牛田大橋SS',
                icon: {
                    url: 'data:image/svg+xml;charset=UTF-8,' + encodeURIComponent(`
                        <svg width="30" height="30" xmlns="http://www.w3.org/2000/svg">
                            <circle cx="15" cy="15" r="12" fill="#4285f4" stroke="white" stroke-width="2"/>
                            <text x="15" y="19" text-anchor="middle" fill="white" font-family="Arial" font-size="12" font-weight="bold">G</text>
                        </svg>
                    `),
                    anchor: new google.maps.Point(15, 15)
                }
            });
            
            // ルートを計算して表示
            directionsService.route({
                origin: origin,
                destination: destination,
                travelMode: google.maps.TravelMode.DRIVING,
                avoidHighways: false,
                avoidTolls: false
            }, (response, status) => {
                if (status === 'OK') {
                    directionsRenderer.setDirections(response);
                    
                    // カスタムマーカーの位置を設定
                    const route = response.routes[0];
                    const leg = route.legs[0];
                    
                    startMarker.setPosition(leg.start_location);
                    endMarker.setPosition(leg.end_location);
                    
                    // 読み込み完了
                    document.getElementById('mapLoading').style.display = 'none';
                    document.getElementById('map').style.display = 'block';
                } else {
                    console.error('Directions request failed due to ' + status);
                    // エラー時の処理
                    document.getElementById('mapLoading').innerHTML = '地図の読み込みに失敗しました';
                }
            });
        }
        
        // エラーハンドリング
        window.gm_authFailure = function() {
            document.getElementById('mapLoading').innerHTML = 'Google Maps APIキーの設定を確認してください';
        };
    </script>
</body>
</html>